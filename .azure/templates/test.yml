steps:
- checkout: none

- task: Bash@3
  displayName: 'SSW CodeAuditor - Check broken links and performance'
  condition: and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/main'))
  continueOnError: true
  inputs:
    targetType: 'inline'
    script: 'docker container run --cap-add=SYS_ADMIN -v "$(Build.SourcesDirectory)/src:/home/lhci/app/src" sswconsulting/codeauditor --token $(CODE_AUDITOR_TOKEN) --url https://ssw.com.au/rules/ --buildId $(Build.BuildNumber)'
